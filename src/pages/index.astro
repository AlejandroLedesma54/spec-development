---
// Server Only
const emailTo = "david.aleho2013@gmail.com";

import BaseHeadIndex from "../components/BaseHeadIndex.astro";
import Header from "../components/Header.astro";
import MetaTags from '../components/MetaTags.astro';
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHeadIndex title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>

  <body>
    <Header />
    <main>
      <section class="section1 flex items-center justify-center min-h-screen">
        <div class="text-center">
          <h2 class="text-2xl mb-2 text-white font-bold">
            Off-Market Luxury<br />Living in South Miami
          </h2>
          <p class="mb-4 text-white">
            A New Spec Home by BP Construction SFL<br />Ready by Spring 2026
          </p>
          <div class="grid grid-cols-2 gap-5 mx-auto">
            <!-- Botón 1 -->
            <a
              class="bg-neutral-600 text-white py-1 px-1 rounded-xl border border-black
    hover:bg-transparent hover:text-white transition-all duration-[1000ms] hover:border-white"
              href="#gallery"
            >
              <button class="text-white transition-all duration-[1000ms]">
                Check out gallery
              </button>
            </a>

            <!-- Botón 2 -->
            <a
              class="bg-neutral-200 text-black py-1 px-1 rounded-xl border border-black
         hover:bg-transparent hover:text-white transition-all duration-[1000ms] hover:border-white"
              href="#contact"
              ><button
                class="hover:text-white transition-all duration-[1000ms]"
              >
                Schedule a private tour
              </button>
            </a>
          </div>
        </div>
      </section>

      <!-- <p id="current-time"></p> -->

      <!-- Section de galleria -->
      <section class="section2" id="gallery">
        <div class="grid grid-cols-2 grid-rows-1 m-20 gap-10">
          <!-- Columna 1 -->
          <div class="flex flex-col">
            <h3 class="text-xl font-semibold text-center">Exteriors</h3>
            <div class="h-4"></div>
            <!-- Espacio debajo del título -->
            <div class="relative flex-1">
              <img
                src="/image4.jpg"
                alt=""
                class="object-cover rounded-2xl shadow-xl w-full h-full"
              />
              <a href="/galleryinteriors" class="absolute bottom-4 right-4">
                <button
                  class="bg-white text-black px-4 py-2 rounded-full border border-white shadow-md transition duration-[1000ms]
             hover:bg-transparent hover:text-black hover:border-black"
                >
                  View Gallery
                </button>
              </a>
            </div>
          </div>

          <!-- Columna 2 -->
          <div class="flex flex-col">
            <h3 class="text-xl font-semibold text-center">Interiors</h3>
            <div class="h-4"></div>
            <!-- Espacio debajo del título -->
            <div class="relative flex-1">
              <img
                src="/image2.jpg"
                alt=""
                class="object-cover rounded-2xl shadow-xl w-full h-full"
              />
              <a href="/gallery" class="absolute bottom-4 right-4">
                <button
                  class="bg-white text-black px-4 py-2 rounded-full border border-white shadow-md transition duration-[1000ms]
             hover:bg-transparent hover:text-black hover:border-black"
                >
                  View Gallery
                </button>
              </a>
            </div>
          </div>
        </div>
      </section>

      <section class="section3 flex items-center justify-center">
        <div class="text-center">
          <h2 class="text-2xl mb-2 text-white font-bold">
            BP Construction SFL
          </h2>
          <p class="mb-4 text-white">
            Well known for delivering exceptional craftsmanship,<br /> timeless design,
            and unmatched attention to detail.
          </p>

          <div class="gap-5">
            <a
              class="bg-neutral-200 text-black py-1 px-1 rounded-xl border border-black
         hover:bg-transparent hover:text-white transition-all duration-[1000ms] hover:border-white"
              href="/videos"
              ><button
                class="hover:text-white transition-all duration-[1000ms] px-4 py-4"
              >
                Request more info
              </button>
            </a>
          </div>
        </div>
      </section>

      <section class="section4 mx-20 my-25">
        <div class="grid grid-cols-2 gap-10">
          <!-- Texto -->
          <div class="flex flex-col justify-center">
            <h4 class="font-bold">
              Why More Buyers Are Choosing Space Over Skyline
            </h4><br />
            <p class="text-lg">
              For decades, high-rise condos in Brickell, Edgewater, and Miami
              Beach have dominated the luxury market. But a new wave of
              homeowners is rejecting the vertical lifestyle in favor of
              something more grounded—and more personal.
              <br /><br />
              Living in a single-family home in South Miami offers:
              <br /><br />
              - True privacy and peace from noisy neighbors <br />
              - Proximity to top-rated schools, parks, and suburban comforts <br
              />
              - Better long-term investment potential <br /><br />
              This is Miami living evolved: luxury, space, and serenity—on your terms.
            </p>
          </div>
          <!-- Imagen -->
          <div class="flex items-center justify-center">
            <img
              src="image3.jpg"
              alt="Miami Home"
              class="w-[500px] h-[500px] object-cover rounded-2xl shadow-xl"
            />
          </div>
        </div>
      </section>

      <section
        id="contact"
        class="section5 flex flex-col items-center justify-center relative"
      >
        <h1 class="font-bold text-white text-3xl">Let's Talk Luxury Living</h1>
        <h4 class="text-white mb-6">Visualize your future home</h4>
        <br />
        <form
          id="contactForm"
          class="w-full max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg space-y-6 dark:bg-gray-800"
        >
          <input type="hidden" name="_replyto" value={emailTo} />

          <!-- Name -->
          <div>
            <label
              for="name"
              class="block mb-2 text-xl font-medium text-gray-900 dark:text-white"
            >
              Name
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="block w-full p-2 border border-gray-300 rounded-lg bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          </div>

          <!-- Phone -->
          <div>
            <label
              for="phone"
              class="block mb-2 text-xl font-medium text-gray-900 dark:text-white"
            >
              Phone Number
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              required
              class="block w-full p-2 border border-gray-300 rounded-lg bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          </div>

          <!-- Email -->
          <div>
            <label
              for="email"
              class="block mb-2 text-xl font-medium text-gray-900 dark:text-white"
            >
              Email
            </label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="block w-full p-2 border border-gray-300 rounded-lg bg-gray-50 text-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            />
          </div>

          <!-- Message -->
          <div>
            <label
              for="message"
              class="block mb-2 text-xl font-medium text-gray-900 dark:text-white"
            >
              Message
            </label>
            <textarea
              id="message"
              name="message"
              rows="4"
              required
              class="block w-full p-4 border border-gray-300 rounded-lg bg-gray-50 text-base focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
            ></textarea>
          </div>

          <!-- Checkbox -->
          <div class="flex items-center">
            <input
              id="checkbox-1"
              type="checkbox"
              required
              class="w-4 h-4 text-gray-900 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"
            />
            <label
              for="checkbox-1"
              class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"
              >I agree to be contacted by <a
                href="http://www.movemiamirealty.com"
                class="text-blue-600 hover:underline dark:text-blue-500"
                >Move Miami</a
              >.</label
            >
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="w-full py-3 px-4 bg-neutral-600 text-white font-semibold rounded-lg hover:bg-white hover:text-neutral-800 border border-neutral-600 transition-colors duration-300"
          >
            Submit
          </button>

          <!-- Success Message -->
          <div
            id="successMessage"
            class="hidden mt-4 text-center text-green-600 font-semibold transition-opacity duration-500 opacity-0"
          >
            ✅ Message sent successfully!
          </div>
        </form>

        <script>
          document.addEventListener("astro:page-load", () => {
            const form = document.getElementById("contactForm");
            const successMsg = document.getElementById("successMessage");

            if (!form || !successMsg) return;

            form.addEventListener("submit", async (e) => {
              e.preventDefault(); // Evita cualquier scroll o redirección
              const formData = new FormData(form);

              try {
                const response = await fetch(
                  "https://formspree.io/f/xeokkpaa",
                  {
                    method: "POST",
                    headers: { Accept: "application/json" },
                    body: formData,
                  },
                );

                if (response.ok) {
                  form.reset();

                  // Mostrar mensaje
                  successMsg.classList.remove("hidden");
                  successMsg.classList.add("opacity-100");

                  // Ocultar tras 4s
                  setTimeout(() => {
                    successMsg.classList.remove("opacity-100");
                    setTimeout(() => successMsg.classList.add("hidden"), 500);
                  }, 4000);
                } else {
                  alert("Something went wrong. Please try again.");
                }
              } catch {
                alert("Error submitting the form.");
              }
            });
          });
        </script>
        <script src="https://unpkg.com/alpinejs" defer></script>
      </section>

      <Footer />

      <!-- Carga Flowbite desde CDN -->
      <script src="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.js"
      ></script>

      <!-- Script para reiniciar Flowbite en cada navegación SPA -->
      <script type="module">
        import("/src/scripts/init-flowbite.js").then(
          ({ initFlowbiteComponents }) => {
            initFlowbiteComponents();

            // Detecta cambios en el DOM por navegación SPA
            const observer = new MutationObserver(() => {
              initFlowbiteComponents();
            });

            observer.observe(document.body, {
              childList: true,
              subtree: true,
            });
          },
        );
      </script>
    </main>
  </body><style>
    /* ==== Mobile Styles Only ==== */
    @media (max-width: 768px) {
     
      body {
        font-size: 16px;
      }
     
      h1 {
        font-size: 2.2em;
      }

      h2 {
        font-size: 1.8em;
      }

      h3 {
        font-size: 1.5em;
      }

      h4 {
        font-size: 1.3em;
      }

      .section1 {
        background-image:
          linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
          url("/image1.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        height: auto;
        padding: 2rem 1rem;
      }

      .section3 {
        background-image:
          linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
          url("/exterior3.jpg") !important;
        background-size: cover !important;
        background-position: center !important;
        background-repeat: no-repeat !important;
        min-height: 60vh !important;
        height: auto !important;
        padding: 2rem 1rem !important;
        background-attachment: scroll !important;
      }
      .section5 {
        background-attachment: scroll;
        background-position: center;
        background-size: cover;
        min-height: auto;
        height: auto;
        padding: 2rem 1rem;
        text-align: center;
      }

      .section2 {
        height: auto;
        padding: 2rem 1rem;
      }

      .section2 .grid {
        grid-template-columns: 1fr;
        gap: 1rem;
        margin: 1rem 0;
      }

      .section4 {
        height: auto;
        padding: 2rem 1rem;
      }

      .section4 .grid {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .section4 img {
        width: 100%;
        height: auto;
      }

      form {
        padding: 1rem !important;
        width: 70%;
      }

      input,
      textarea {
        font-size: 1rem !important;
      }

      button {
        width: 100% !important;
      }

      .grid-cols-2 {
        grid-template-columns: 1fr !important;
      }

      .text-center {
        text-align: center;
      }

      .mx-20,
      .my-25 {
        margin-left: 1rem !important;
        margin-right: 1rem !important;
        margin-top: 1rem !important;
        margin-bottom: 1rem !important;
      }

      .w-[500px],
      .h-[500px] {
        width: 100% !important;
        height: auto !important;
      }

      .p-6 {
        padding: 1rem !important;
      }
    }
    html {
      scroll-behavior: smooth;
    }
  </style>
</html>
